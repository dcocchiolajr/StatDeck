<!DOCTYPE html>
<html><body>
<div id="app"></div>
<div id="tile-grid"></div>
<div id="disconnected-overlay" class="hidden"></div>
<pre id="output"></pre>
<script>
var log = [];
var _origLog = console.log;
console.log = function() { 
    log.push(Array.from(arguments).join(' ')); 
    document.getElementById('output').textContent = log.join('\n');
    _origLog.apply(console, arguments);
};
window.onerror = function(msg, url, line) {
    log.push('ERROR: ' + msg + ' at ' + url + ':' + line);
    document.getElementById('output').textContent = log.join('\n');
};
</script>
<script>
// Mock the dependencies
class USBClient { on(){} connect(){} emit(){} sendAction(){} }
class LayoutEngine { constructor(){} apply(){} }
class TileManager { constructor(){} createTiles(){} }
class TouchHandler { on(){} registerTiles(){} }
</script>
<script src="core/app.js"></script>
<script>
// Now manually call loadConfig with the real layout
var layout = {"version": "1.0", "grid": {"cols": 4, "rows": 3, "cell_width": 180, "cell_height": 120, "gap": 10}, "tiles": [{"id": "cpu_main", "type": "cpu_graph", "position": {"x": 0, "y": 0}, "size": {"w": 2, "h": 1}, "data_source": "cpu.usage", "style": {"color": "", "background": "", "fill": true, "graphStyle": "bar"}, "config": {"history_seconds": 60, "show_cores": false}, "actions": {"tap": {"type": "launch_app", "target": "C:\\Users\\dcocc\\Desktop\\Chrome Remote Desktop.lnk", "arguments": ""}, "long_press": {"type": "launch_app", "target": "C:\\Users\\dcocc\\Desktop\\MaxScripts", "arguments": ""}}}, {"id": "cpu_temp", "type": "gauge", "position": {"x": 2, "y": 0}, "size": {"w": 1, "h": 1}, "data_source": "cpu.usage", "style": {"color": "", "warning_color": "#ffaa00", "critical_color": "#ff0000", "gaugeStyle": "semi", "background": ""}, "config": {"min": 0, "max": 100, "units": "\u00b0C", "threshold_warning": 70, "threshold_critical": 85}, "actions": {}}, {"id": "gpu_temp", "type": "gauge", "position": {"x": 3, "y": 0}, "size": {"w": 1, "h": 1}, "data_source": "gpu.temp", "style": {"color": "#ff6b6b"}, "config": {"min": 0, "max": 100, "units": "\u00b0C", "threshold_warning": 75, "threshold_critical": 90}, "actions": {"tap": {"type": "launch_app", "target": "C:\\Users\\dcocc\\Desktop\\Chrome Remote Desktop.lnk", "arguments": ""}}}, {"id": "ram_display", "type": "text_display", "position": {"x": 2, "y": 1}, "size": {"w": 1, "h": 1}, "data_source": "ram.percent", "style": {"color": "", "background": "", "displayStyle": "multi"}, "config": {"label": "RAM", "units": "%", "decimals": 1, "font_size": "large"}, "actions": {"tap": {"type": "launch_app", "target": "C:\\Users\\dcocc\\Desktop\\Chrome Remote Desktop.lnk", "arguments": ""}}}, {"id": "gpu_usage", "type": "text_display", "position": {"x": 2, "y": 2}, "size": {"w": 1, "h": 1}, "data_source": "gpu.usage", "style": {"color": "", "background": "", "fontScale": 200}, "config": {"label": "GPU", "units": "%", "decimals": 0, "font_size": "large"}, "actions": {}}, {"id": "disk_usage", "type": "text_display", "position": {"x": 3, "y": 2}, "size": {"w": 1, "h": 1}, "data_source": "disk.usage_percent", "style": {"color": "", "background": "", "fontScale": 200}, "config": {"label": "Disk", "units": "%", "decimals": 0, "font_size": "large"}, "actions": {}}, {"id": "tile_1", "type": "gauge", "position": {"x": 3, "y": 1}, "size": {"w": 1, "h": 1}, "data_source": "cpu.usage", "style": {"color": "#00ff88", "background": "#1a1a2e", "gaugeStyle": "linear", "fontScale": 200}, "config": {}, "actions": {"tap": {"type": "open_folder", "folder": "C:\\Users\\dcocc\\Desktop\\cad"}}}, {"id": "tile_2", "type": "network_graph", "position": {"x": 0, "y": 1}, "size": {"w": 2, "h": 1}, "data_source": "network", "style": {"color": "#00ff88", "background": ""}, "config": {}, "actions": {}}], "theme": "dark_red", "themeData": {"id": "dark_red", "name": "Dark Red", "colors": {"primary": "#ff0000", "secondary": "#ff0000", "accent": "#ffffff", "background": "#000000", "surface": "#000000", "text": "#ffffff", "textSecondary": "#ffffff", "border": "#ffffff"}, "fonts": {"main": "'Rajdhani', 'Arial', sans-serif", "mono": "'Press Start 2P', 'Courier New', monospace"}, "effects": {"glow": true, "scanlines": false, "pixelated": false, "bevel": false}}};
log.push('Testing loadConfig with theme=' + layout.theme + ' hasThemeData=' + !!layout.themeData);
try {
    window.app.loadConfig(layout);
    log.push('loadConfig completed successfully');
} catch(e) {
    log.push('loadConfig ERROR: ' + e.message + ' at line ' + e.lineNumber);
    log.push('Stack: ' + e.stack);
}
document.getElementById('output').textContent = log.join('\n');
</script>
</body></html>